<h2>{{{__ "related to" (getThingLink thing)}}}</h2>
{{{__ "please complete your upload" }}}
<div id="page-errors">
{{#each pageErrors}}
  <div class="error">{{{this}}}</div>
{{/each}}
</div>
<p>
<form method="post">
<input type="hidden" name="_csrf" value="{{csrfToken}}">
<input name="upload-language" type="hidden" value="{{#if uploadLanguage}}{{uploadLanguage}}{{else}}{{currentLanguage.langKey}}{{/if}}">
{{#each uploadedFiles}}
<b>{{{__ "filename"}}}</b> {{this.name}}

{{{renderFilePreview this}}}

<p>
<fieldset>
<div class="grid grid-with-sidebar">
  <div>
    <label for="upload-{{this.id}}-description">{{{__ "upload description"}}} <span class="required">*</span></label>
    <textarea id="upload-{{this.id}}-description" name="upload[{{this.id}}][description]" data-required placeholder='{{{__ "enter description"}}}'>{{lookup (lookup ../formValues this.id) "description"}}</textarea>
  </div>
  <div>
    {{>help input=(substitute "upload-%1-description" this.id) helpLabel="upload description" helpText="upload description help"}}
  </div>
</div>

<div>
  <label for="upload-{{this.id}}-by-uploader">
    <input type="radio" data-hide="expanded-info-{{this.id}}" data-disable-required-group="upload-metadata-{{this.id}}" id="upload-{{this.id}}-by-uploader" name="upload[{{this.id}}][by]" value="uploader" {{#unless (lookup (lookup ../formValues this.id) "by")}}checked{{/unless}}{{#ifCond (lookup (lookup ../formValues this.id) "by") '===' 'uploader'}}checked{{/ifCond}}>
    {{{__ "my own work"}}}
  </label>
  <label for="upload-{{this.id}}-by-other">
    <input type="radio" id="upload-{{this.id}}-by-other" name="upload[{{this.id}}][by]" value="other" data-show="expanded-info-{{this.id}}" data-enable-required-group="upload-metadata-{{this.id}}" {{#ifCond (lookup (lookup ../formValues this.id) "by") '===' 'other'}}checked{{/ifCond}}>
    {{{__ "someone else's work"}}}
  </label>
</div>

<div class="hidden-regular nojs-visible" id="expanded-info-{{this.id}}">
  <div class="grid grid-form">
    <div>
      <label for="upload-{{this.id}}-creator">{{{__ "creator"}}} <span data-required-indicator-group="upload-metadata-{{this.id}}" class="hidden">*</span></label>
      <input type="text" id="upload-{{this.id}}-creator" name="upload[{{this.id}}][creator]" data-required-input-group="upload-metadata-{{this.id}}" placeholder='{{{__ "enter creator name"}}}' value="{{lookup (lookup ../formValues this.id) "creator"}}">
    </div>
    <div>
      {{>help input=(substitute "upload-%1-creator" this.id) helpLabel="creator" helpText="creator help"}}
    </div>

    <div>
      <label for="upload-{{this.id}}-source">{{{__ "source"}}} <span data-required-indicator-group="upload-metadata-{{this.id}}" class="hidden">*</span></label>
      <input type="text" id="upload-{{this.id}}-source" name="upload[{{this.id}}][source]" data-required-input-group="upload-metadata-{{this.id}}" placeholder='{{{__ "enter source"}}}' value="{{lookup (lookup ../formValues this.id) "source"}}">
    </div>
    <div>
      {{>help input=(substitute "upload-%1-source" this.id) helpLabel="source help label" helpText="source help"}}
    </div>
  </div>

  <div class="form-section">
    <b>{{{__ "license"}}}</b>
    <label for="upload-license-{{this.id}}-fair-use">
      <input type="radio" name="upload[{{this.id}}][license]" id="upload-license-{{this.id}}-fair-use" value="fair-use" {{#unless (lookup (lookup ../formValues this.id) "license")}}checked{{/unless}}{{#ifCond (lookup (lookup ../formValues this.id) "license") '===' 'fair-use'}}checked{{/ifCond}}>
      {{{__ "fair use"}}}
    </label>
    <label for="upload-license-{{this.id}}-cc-0">
      <input type="radio" id="upload-license-{{this.id}}-cc-0" name="upload[{{this.id}}][license]" value="cc-0" {{#ifCond (lookup (lookup ../formValues this.id) "license") '===' 'cc-0'}}checked{{/ifCond}}>
      {{{__ "cc-0"}}}
    </label>
    <label for="upload-license-{{this.id}}-cc-by">
      <input type="radio" id="upload-license-{{this.id}}-cc-by" name="upload[{{this.id}}][license]" value="cc-by" {{#ifCond (lookup (lookup ../formValues this.id) "license") '===' 'cc-by'}}checked{{/ifCond}}>
      {{{__ "cc-by"}}}
    </label>
    <label for="upload-license-{{this.id}}-cc-by-sa">
      <input type="radio" id="upload-license-{{this.id}}-cc-by-sa" name="upload[{{this.id}}][license]" value="cc-by-sa" {{#ifCond (lookup (lookup ../formValues this.id) "license") '===' 'cc-by-sa'}}checked{{/ifCond}}>
      {{{__ "cc-by-sa"}}}
    </label>
  </div>
</div>

{{#unless @last}}
<hr class="feed-separator">
{{/unless}}
</fieldset>
{{/each}}

<div class="validation-error" id="required-fields-message">
{{{__ "complete all required fields"}}}
</div>
<div class="validation-error" id="form-error-message">
{{{__ "correct errors"}}}
</div>
<button id="finish-upload" data-check-required type="submit">{{{__ "finish upload"}}}</button>

</form>
